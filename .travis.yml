language: objective-c

matrix:
  include:
    - os: osx
      osx_image: xcode9
      env: SCHEME="Sanitize-Package"
    - os: osx
      osx_image: xcode8.3
      env: SCHEME="Sanitize"

before_install:
  brew tap vapor/tap;
  brew update;
  brew install ctls;

script:
    - swift build
    - swift build -c release
    - swift package generate-xcodeproj
    - xcodebuild -scheme $SCHEME -enableCodeCoverage YES test | xcpretty

after_success:
  - bash <(curl -s https://codecov.io/bash)
